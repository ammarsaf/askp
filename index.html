<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marriage Questionnaire</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f2e7fe; /* Light purple background */
            color: #333;
        }

        .container {
            width: 80%;
            margin: 20px auto;
            padding: 20px;
            border: 1px solid #d0bfff;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            background-color: #fff;
        }

        h1 {
            color: #7952b3; /* Dark purple heading */
            text-align: center;
        }

        .question {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #d0bfff;
            border-radius: 10px;
            background-color: #f9f0ff; /* Lighter purple question background */
        }

        .question label {
            display: block;
            margin-bottom: 5px;
            color: #555;
        }

        input[type="radio"] {
            margin-right: 5px;
        }

        select {
            padding: 8px;
            border: 1px solid #d0bfff;
            border-radius: 5px;
            margin-bottom: 10px;
            width: 100%;
            box-sizing: border-box;
        }

        button {
            background-color: #7952b3; /* Dark purple button */
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #6741a5;
        }

        .validation-message {
            color: #dc3545;
            margin-top: 10px;
        }

        #statistics-container {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #d0bfff;
            border-radius: 10px;
            background-color: #f9f0ff;
        }

        div.context {
            color: #7952b3; /* Dark purple heading */
            text-align:center;
        }

        /* Media query for responsiveness */
        @media (max-width: 768px) {
            .container {
                width: 95%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
    <h1>Hundred Marriage Questionnaire</h1>
    <div class="context">
        <p>
            A list of questionaire to score your partner answers in talking stage phase - for
            knowing him/her better towards <i>marriage</i> journey.
        </p>
        <p>
            The scoring spectrum might be different for everyone. You can define 
            <strong>1 as Strongly Disagree</strong> and <strong>5 Strongly Agree</strong> while 
            <strong>3 as neutral</strong> .
        </p>
        <p>
            The impact indicator have <strong>Tolerable</strong>, <strong>Non-tolerable</strong>, 
            and <strong>None</strong> option.
        </p>

        <p>
            For example if you choose Tolerable with score 1, it means it does not impact you very much. 
            However, if the question is Non-tolerable with score 1, means it will impact you 
            very much.
        </p>
        <p>
            After completing all the questions, 
            you can get the statistical view of the answers and download the file 
            for your reference. Use this as guidance, not as the decision maker. 
        </p>
        <p>
            After all, you need to listen to yourself and pray for the best. 
        </p>    
        <a href="https://www.rahmaa.org/resources/100-questions-by-imam-magid/"> Source </a>
    </div><br><br>
    <form id="questionnaire-form">
        <div id="questions-container">
            <!-- Questions will be dynamically added here -->
        </div>
        <button type="button" onclick="submitForm()">Submit</button>
        <button type="button" onclick="downloadCsv()">Download CSV</button>
    </form>
    <div id="validation-message" class="validation-message"></div>
    <div id="statistics-container">
        <!-- Statistics will be displayed here -->
    </div>
    </div>
    <script>
        const questions = [
            "What is your concept of marriage?",
            "Have you ever been married before?",
            "Are you married now?",
            "What are your expectations of marriage?",
            "What are your goals in life? Long term and short term plans.",
            "Identify three things that you want to accomplish in the near future.",
            "Identify three things that you want to accomplish, long-term.",
            "Why have you chosen me as your potential spouse?",
            "What is the role of religion in your life – now?",
            "Are you a spiritual person?",
            "What is your understanding of an Islamic marriage?",
            "What are you expecting of your spouse, religiously?",
            "What is your relationship between yourself and the Muslim community in your area?",
            "Are you volunteering in any Islamic activities?",
            "What can you offer your mate, spiritually?",
            "What is the role of a husband?",
            "What is the role of a wife?",
            "Do you want to practice polygamy?",
            "What is your relationship with your family?",
            "What do you expect your relationship to be like with the family of your spouse?",
            "What do you expect the relationship between your spouse and your family to be like?",
            "Is there anyone in your family that lives with you now?",
            "Are you planning to have anyone in your family live with you in the future?",
            "If for any reason my relationship with your family turns sour, what should be done?",
            "Who are your friends? Identify at least three.",
            "How did you get to know them?",
            "Why are they your friends?",
            "What do you like most about them?",
            "What will your relationship with them be like after marriage?",
            "Do you have friends from the opposite sex?",
            "What is the level of your relationship with them – now?",
            "What will be the level of your relationship with them after marriage?",
            "What type of relationship do you want your spouse to have with your friends?",
            "What are the things that you do in your free time?",
            "Do you like to have guests in your home for entertainment?",
            "What are you expecting from your spouse when your friends come to the house?",
            "What is your opinion of speaking other languages in the home that I do not understand? With friends? With family?",
            "Do you travel?",
            "How do you spend your vacations?",
            "How do you think your spouse should spend vacations?",
            "Do you read?",
            "What do you read?",
            "After marriage, do you think that you are one to express romantic feelings verbally?",
            "After marriage, do you think that you want to express affection in public?",
            "How do you express your admiration for someone that you know – now?",
            "How do you express your feelings to someone who has done a favor for you?",
            "Do you like to write your feelings?",
            "If you wrong someone, how do you apologize?",
            "If someone has wronged you, how do you want them to apologize to you?",
            "How much time passes before you choose to forgive someone?",
            "How do you make important and less important decisions in your life?",
            "Do you use foul language at home? In public? With your family?",
            "Do your friends use foul language?",
            "Does your family use foul language?",
            "How do you express anger?",
            "How do you expect your spouse to express anger?",
            "What do you do when you are angry?",
            "When do you think it is appropriate to initiate mediation in a marriage?",
            "When there is a dispute in your marriage, religious or not, how should the conflict be resolved?",
            "Define mental, verbal, emotional, and physical abuse.",
            "What would you do if you felt that you had been abused?",
            "Who would you call for assistance if you were being abused?",
            "Do you suffer from any chronic disease or condition?",
            "Are you willing to take a physical exam by a physician, before marriage?",
            "What is your understanding of proper health and nutrition?",
            "How do you support your own health and nutrition?",
            "What is your definition of wealth?",
            "How do you spend your money?",
            "How do you save your money?",
            "How do you think that your use of money will change after marriage?",
            "Do you have any debts now? If so, how are you making progress to eliminate the debt?",
            "Do you use credit cards?",
            "Do you support the idea of taking loans to buy a home?",
            "What are you expecting from your spouse financially?",
            "What is your financial responsibility in a marriage?",
            "Do you support the idea of a working wife?",
            "If so, how do you think a dual-income family should manage funds?",
            "Do you currently use a budget to manage your finances?",
            "Who are the people to whom you are financially responsible?",
            "Do you support the idea of utilizing baby-sitters and maids?",
            "Do you want to have children? If not, why?",
            "To the best of your understanding, are you able to have children?",
            "Do you want to have children in the first two years of marriage? If not, then when?",
            "Do you believe in abortion in you family?",
            "Do you have children now?",
            "What is your relationship with your children, now?",
            "What is your relationship with their parent, now?",
            "What relationship do you expect your spouse to have with your children and their parent?",
            "What is the best method of raising children?",
            "What is the best method of disciplining children?",
            "How were you raised?",
            "How were you disciplined?",
            "Do you believe in spanking children? Under what circumstances?",
            "Do you believe in public schools for your children?",
            "Do you believe in Islamic schools for your children?",
            "Do you believe in home-schooling your children? If so, by whom?",
            "What type of relationship should your children have with non-Muslim classmates and friends?",
            "Would you send your children to visit their extended family if they lived in another state or country?",
            "What type of relationship do you want your children to have with all of their grandparents?",
            "If there are members of my family that are not Muslim, that are of a different culture or race, what type of relationship do you want to have with them?"
        ];

        function generateForm() {
            const questionsContainer = document.getElementById("questions-container");
            questions.forEach((question, index) => {
                const questionDiv = document.createElement("div");
                questionDiv.classList.add("question");
                questionDiv.innerHTML = `
                    <label for="question-${index}">${index + 1}. ${question}</label>
                    <div>
                        <label><input type="radio" name="rating-${index}" value="1">1</label>
                        <label><input type="radio" name="rating-${index}" value="2">2</label>
                        <label><input type="radio" name="rating-${index}" value="3">3</label>
                        <label><input type="radio" name="rating-${index}" value="4">4</label>
                        <label><input type="radio" name="rating-${index}" value="5">5</label>
                    </div>
                    <select name="tag-${index}">
                        <option value="Tolerable">Tolerable</option>
                        <option value="Non-tolerable">Non-tolerable</option>
                        <option value="None">None</option>
                    </select>
                `;
                questionsContainer.appendChild(questionDiv);
            });
        }

        function submitForm() {
            const validationMessage = document.getElementById("validation-message");
            validationMessage.textContent = "";
            const form = document.getElementById("questionnaire-form");
            let allQuestionsAnswered = true;
            for (let i = 0; i < questions.length; i++) {
                const rating = form.querySelector(`input[name="rating-${i}"]:checked`);
                const tag = form.querySelector(`select[name="tag-${i}"]`).value;
                if (!rating || tag === "") {
                    validationMessage.textContent = `Please answer question ${i + 1}.`;
                    allQuestionsAnswered = false;
                    break;
                }
            }
            if (allQuestionsAnswered) {
                displayStatistics();
            }
        }

        function displayStatistics() {
            const form = document.getElementById("questionnaire-form");
            const answers = [];
            for (let i = 0; i < questions.length; i++) {
                const rating = parseInt(form.querySelector(`input[name="rating-${i}"]:checked`).value);
                const tag = form.querySelector(`select[name="tag-${i}"]`).value;
                answers.push({ rating, tag });
            }

            const tagCounts = {
                "Tolerable": { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 },
                "Non-tolerable": { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 },
                "None": { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 }
            };

            answers.forEach(answer => {
                tagCounts[answer.tag][answer.rating]++;
            });

            const statisticsContainer = document.getElementById("statistics-container");
            statisticsContainer.innerHTML = "<h2>Statistics</h2>";

            for (const tag in tagCounts) {
                const total = Object.values(tagCounts[tag]).reduce((a, b) => a + b, 0);
                if (total > 0) {
                    statisticsContainer.innerHTML += `<h3>${tag}</h3>`;
                    for (let i = 1; i <= 5; i++) {
                        const percentage = (tagCounts[tag][i] / total) * 100;
                        statisticsContainer.innerHTML += `<p>Score ${i}: <strong>${percentage.toFixed(2)}%<strong></p>`;
                    }
                } else {
                    statisticsContainer.innerHTML += `<h3>${tag}</h3><p>No data for this tag.</p>`;
                }
            }
        }

        function downloadCsv() {
            const form = document.getElementById("questionnaire-form");
            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "Question,Rating,Tag\r\n";
            for (let i = 0; i < questions.length; i++) {
                const rating = form.querySelector(`input[name="rating-${i}"]:checked`)?.value || "";
                const tag = document.querySelector(`select[name="tag-${i}"]`).value || "";
                csvContent += `"${questions[i]}","${rating}","${tag}"\r\n`;
            }
            var encodedUri = encodeURI(csvContent);
            var link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "questionnaire_results.csv");
            document.body.appendChild(link);
            link.click();
        }

        window.onload = generateForm;
    </script>
</body>
</html>
